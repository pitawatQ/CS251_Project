<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</title>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/promotion.css">
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <div class="logo-box">
        <img src="pics/brand.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏£‡πâ‡∏≤‡∏ô">
      </div>
      <div class="nav-buttons">
        <button class="nav-btn">
          <img src="pics/home_icon.png" alt="‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å"> ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        </button>
        <button class="nav-btn active">
          <img src="pics/cook.png" alt="‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô"> ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô
        </button>
        <button class="nav-btn" id="call-staff-btn">
          <img src="img\picture\Notifying_bell.png" alt="‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô"> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
        </button>
        <div class="table-dropdown">
          <button id="table-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞ ‚ñº</button>
          <div class="dropdown-content">
            <a href="#" class="table-select">‡πÇ‡∏ï‡πä‡∏∞ 1</a>
            <a href="#" class="table-select">‡πÇ‡∏ï‡πä‡∏∞ 2</a>
            <a href="#" class="table-select">‡πÇ‡∏ï‡πä‡∏∞ 3</a>
            <a href="#" class="table-select">‡πÇ‡∏ï‡πä‡∏∞ 4</a>
            <a href="#" class="table-select">‡πÇ‡∏ï‡πä‡∏∞ 5</a>
           
          </div>
        </div>
      </div>
    </div>

    <div class="gradient-bar"></div>

    <div class="content-wrapper">
      <div class="menu-section">
        <div class="menu-heading">
          <img src="pics/flowers.png" class="menu-icon" alt="menu icon">
          <h2>‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</h2>
        </div>
        <div class="gradient-line"></div>
        <div class="tags">
          <a href="home_customer.php" class="tag popular">‚≠ê ‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</a>
          <div class="tag promo">‚≠ê ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</div>
        </div>

        <div class="banner">
          <img src="pics/banner.png" alt="Summer Deals">
        </div>
        <p class="desc">‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏¢‡πá‡∏ô ‡πÜ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏•‡∏™‡∏á‡∏Å‡∏£‡∏≤‡∏ô‡∏ï‡πå üí¶</p>

        <div class="menu-grid">
          <div class="menu-card">
            <img src="pics/pick1.png" class="menu-img" data-img="pics/pick1.png">
            <div class="menu-name">‡∏ä‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏° ‡πÇ‡∏õ‡∏£ 1</div>
            <div class="original"><s>‡∏ø 190</s></div>
            <div class="menu-price">‡∏ø 143</div>
            <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
          </div>
          <div class="menu-card">
            <img src="pics/set2.png" class="menu-img" data-img="pics/set2.png">
            <div class="menu-name">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô 2</div>
            <div class="original"><s>‡∏ø 110</s></div>
            <div class="menu-price">‡∏ø 99</div>
            <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
          </div>
          <div class="menu-card">
            <img src="pics/pick2.png" class="menu-img" data-img="pics/pick2.png">
            <div class="menu-name">‡∏ä‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÇ‡∏õ‡∏£ 3</div>
            <div class="original"><s>‡∏ø 80</s></div>
            <div class="menu-price">‡∏ø 59</div>
            <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
          </div>
          </div>
      </div>

      <div class="cart-box">
        <h2><img src="pics/basket.png" class="menu-icon" alt="basket"> ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h2>
        <p id="table-status">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞</p>
        <div id="empty-cart" class="empty-cart">
          <img class="empty-icon" src="pics/gold.png" alt="icon">
          <p><strong>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</strong></p>
          <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</p>
        </div>
        <ul id="cart-items"></ul>
        <div id="cart-total" class="total-price" style="display: none;">
          ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: <span id="total-amount">‡∏ø 0</span>
        </div>
        <button id="submit-order" class="add-to-cart-btn" style="display: none;">‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
      </div>
    </div>
  </div>
  <script>
    /// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏° (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    function calculateTotal() {
      let total = 0;
      document.querySelectorAll('.cart-item').forEach(item => {
        const price = parseFloat(item.getAttribute('data-price'));
        const quantity = parseInt(item.querySelector('.quantity').textContent);
        total += price * quantity;
      });
      document.getElementById('total-amount').textContent = `‡∏ø ${total}`;
      return total;
    }

    let selectedMenuItems = {}; // Object ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ß‡πâ { itemName: { price: number, img: string, quantity: number, note: string } }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
    function updateCartDisplay() {
      const cartItemsContainer = document.getElementById('cart-items');
      const emptyCartMessage = document.getElementById('empty-cart');
      const cartTotalSection = document.getElementById('cart-total');
      const submitOrderButton = document.getElementById('submit-order');
      const addMoreButton = document.getElementById('add-more-items-btn');

      cartItemsContainer.innerHTML = '';
      let hasItems = false;

      for (const itemName in selectedMenuItems) {
        if (selectedMenuItems.hasOwnProperty(itemName) && selectedMenuItems[itemName].quantity > 0) {
          hasItems = true;
          const item = selectedMenuItems[itemName];
          const quantity = item.quantity;
          const note = item.note || ''; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô '' ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏ô‡πâ‡∏ï

          const listItem = document.createElement('li');
          listItem.classList.add('cart-item');
          listItem.setAttribute('data-price', item.price);
          listItem.setAttribute('data-name', itemName);

          let description = "";
          switch (itemName) {
            case "‡∏ä‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏° ‡πÇ‡∏õ‡∏£ 1": description = "‡∏ä‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©"; break;
            case "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô 1": description = "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô"; break;
            case "‡∏ä‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÇ‡∏õ‡∏£ 2": description = "‡∏ä‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì"; break;
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ
            default: description = "";
          }

          listItem.innerHTML = `
                        <div class="cart-item-header">
                            <img src="${item.img}" class="cart-item-img">
                            <div class="cart-item-details">
                                <div class="cart-item-name">${itemName}</div>
                                <div class="menu-description">${description}</div>
                                <div class="cart-item-price">‡∏ø ${item.price.toFixed(2)}</div>
                            </div>
                        </div>
                        <div class="cart-item-controls">
                            <div class="quantity-controls">
                                <button class="quantity-btn decrease-btn">-</button>
                                <span class="quantity">${quantity}</span>
                                <button class="quantity-btn increase-btn">+</button>
                            </div>
                            <button class="remove-btn">‚úï</button>
                        </div>
                        <textarea class="special-note-cart" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏∑‡∏° ‡πÄ‡∏ä‡πà‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡∏ú‡∏±‡∏Å">${note}</textarea>
                    `;
          cartItemsContainer.appendChild(listItem);
        }
      }

      if (hasItems) {
        emptyCartMessage.style.display = 'none';
        cartTotalSection.style.display = 'block';
        submitOrderButton.style.display = 'block';
        calculateTotal();
      } else {
        emptyCartMessage.style.display = 'block';
        cartTotalSection.style.display = 'none';
        submitOrderButton.style.display = 'none';
        if (addMoreButton) {
          addMoreButton.remove();
        }
      }

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å" ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π
      document.querySelectorAll('.select-btn').forEach(btn => {
        const menuItem = btn.closest('.menu-card');
        const itemName = menuItem.querySelector('.menu-name').textContent;
        if (selectedMenuItems[itemName] && selectedMenuItems[itemName].quantity > 0) {
          btn.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß';
          btn.disabled = true;
        } else {
          btn.textContent = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å';
          btn.disabled = false;
        }
      });
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å")
    document.querySelectorAll('.select-btn').forEach(button => {
      button.addEventListener('click', function() {
        const menuItem = this.closest('.menu-card');
        const itemName = menuItem.querySelector('.menu-name').textContent;
        const itemPriceText = menuItem.querySelector('.menu-price').textContent;
        const itemPrice = parseFloat(itemPriceText.replace('‡∏ø ', ''));
        const itemImg = menuItem.querySelector('.menu-img').getAttribute('data-img');

        if (selectedMenuItems[itemName]) {
          selectedMenuItems[itemName].quantity++;
        } else {
          selectedMenuItems[itemName] = {
            price: itemPrice,
            img: itemImg,
            quantity: 1,
            note: '' // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏ô‡πâ‡∏ï‡∏ß‡πà‡∏≤‡∏á
          };
        }
        updateCartDisplay();
      });
    });

    // ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ô textarea ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
    document.addEventListener('change', function(event) {
      if (event.target.classList.contains('special-note-cart')) {
        const cartItem = event.target.closest('.cart-item');
        const itemName = cartItem.getAttribute('data-name');
        if (selectedMenuItems[itemName]) {
          selectedMenuItems[itemName].note = event.target.value.trim();
        }
      }
    });

    // ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤" (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô controls)
    document.getElementById('submit-order').addEventListener('click', function() {
      const cartItemsContainer = document.getElementById('cart-items');
      const addMoreButton = document.getElementById('add-more-items-btn');

      if (this.textContent === '‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤' && Object.keys(selectedMenuItems).length > 0) {
        this.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
        // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î/‡∏•‡∏ö (‡πÅ‡∏•‡∏∞ textarea)
        cartItemsContainer.querySelectorAll('.cart-item').forEach(item => {
          const quantityControls = item.querySelector('.quantity-controls');
          const removeButton = item.querySelector('.remove-btn');
          const noteInput = item.querySelector('.special-note-cart');
          if (quantityControls) quantityControls.style.display = 'none';
          if (removeButton) removeButton.style.display = 'none';
          if (noteInput) noteInput.style.display = 'none';
        });

        // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏° "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"
        if (!addMoreButton) {
          const newAddMoreButton = document.createElement('button');
          newAddMoreButton.id = 'add-more-items-btn';
          newAddMoreButton.classList.add('add-more-items-btn');
          newAddMoreButton.textContent = '+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
          document.querySelector('.cart-box').appendChild(newAddMoreButton);

          newAddMoreButton.addEventListener('click', function() {
            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÅ‡∏•‡∏∞ textarea)
            cartItemsContainer.querySelectorAll('.cart-item').forEach(item => {
              const quantityControls = item.querySelector('.quantity-controls');
              const removeButton = item.querySelector('.remove-btn');
              const noteInput = item.querySelector('.special-note-cart');
              if (quantityControls) quantityControls.style.display = 'flex';
              if (removeButton) removeButton.style.display = 'block';
              if (noteInput) noteInput.style.display = 'block';
            });
            document.getElementById('submit-order').textContent = '‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤';
            newAddMoreButton.remove();
          });
        } else if (addMoreButton.style.display === 'none') {
          addMoreButton.style.display = 'block';
        }
      } else if (this.textContent === '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£') {
        // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏î‡πâ‡∏ß‡∏¢)
        const tableStatus = document.getElementById('table-status').textContent;
        const orderDetails = [];
        for (const itemName in selectedMenuItems) {
          if (selectedMenuItems[itemName].quantity > 0) {
            orderDetails.push({
              name: itemName,
              quantity: selectedMenuItems[itemName].quantity,
              note: selectedMenuItems[itemName].note
            });
          }
        }

        if (tableStatus === '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞') {
          alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£');
          return;
        }

        if (orderDetails.length === 0) {
          alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á');
          return;
        }

        const total = calculateTotal();
        const confirmOrder = confirm(`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà ${tableStatus}\n‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ${JSON.stringify(orderDetails, null, 2)}\n‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: ‡∏ø ${total}`);

        if (confirmOrder) {
          alert('‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');

          document.getElementById('cart-items').innerHTML = '';
          document.getElementById('empty-cart').style.display = 'block';
          document.getElementById('cart-total').style.display = 'none';
          this.style.display = 'none';
          if (addMoreButton) {
            addMoreButton.remove();
          }
          document.querySelectorAll('.select-btn').forEach(btn => {
            btn.textContent = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å';
            btn.disabled = false;
          });
          selectedMenuItems = {};
          cartItemsAdded = false;
        }
      }
    });

    // ‡πÄ‡∏û‡∏¥‡πà‡∏° event delegation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏)
    document.addEventListener('click', function(event) {
      const target = event.target;
      if (target.classList.contains('increase-btn') || target.classList.contains('decrease-btn')) {
        const cartItem = target.closest('.cart-item');
        const itemName = cartItem.getAttribute('data-name');
        if (selectedMenuItems[itemName]) {
          if (target.classList.contains('increase-btn')) {
            selectedMenuItems[itemName].quantity++;
          } else if (target.classList.contains('decrease-btn') && selectedMenuItems[itemName].quantity > 1) {
            selectedMenuItems[itemName].quantity--;
          }
          updateCartDisplay();
        }
      }

      if (target.classList.contains('remove-btn')) {
        const cartItem = target.closest('.cart-item');
        const itemNameToRemove = cartItem.getAttribute('data-name');
        delete selectedMenuItems[itemNameToRemove];
        updateCartDisplay();
      }
    // ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô"
            if (target.id === 'call-staff-btn') {
                const tableStatusElement = document.getElementById('table-status');
                const currentTableText = tableStatusElement.textContent;

                if (currentTableText === '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞') {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô');
                    return;
                }

                // ‡∏î‡∏∂‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞ (‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏≠ "‡πÇ‡∏ï‡πä‡∏∞ X")
                const tableNumber = currentTableText.split(' ')[1];

                // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏ï‡πä‡∏∞
                fetch('backend/call_staff.php', { // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå call_staff.php ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `table_no=${tableNumber}`
                })
                .then(response => response.text())
                .then(data => {
                    if (data === 'success') {
                        alert(`‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏ï‡πä‡∏∞ ${tableNumber} ‡πÅ‡∏•‡πâ‡∏ß`);
                        // ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á UI ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                        console.error('Error calling staff:', data);
                    }
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠');
                });
            }
        });
    

    // ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞ (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    document.addEventListener('click', function(event) {
      if (event.target.classList.contains('table-select')) {
        event.preventDefault();
        const tableNumber = event.target.textContent;
        document.getElementById('table-status').textContent = tableNumber;
        document.getElementById('table-btn').textContent = tableNumber;
        event.target.closest('.dropdown-content').style.display = 'none';
      }
    });

    // ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞ (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    document.getElementById('table-btn').addEventListener('click', function() {
      const dropdown = this.nextElementSibling;
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    });

    // ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    window.addEventListener('click', function(event) {
      if (!event.target.matches('#table-btn')) {
        const dropdowns = document.getElementsByClassName('dropdown-content');
        for (let i = 0; i < dropdowns.length; i++) {
          if (dropdowns[i].style.display === 'block') {
            dropdowns[i].style.display = 'none';
          }
        }
      }
    });
  </script>
</body>
</html>
